/* Private define ------------------------------------------------------------*/

#define DAC_BUFF_SIZE			(315)
#define ADC_BUFF_SIZE			(1000)

/* Private macro -------------------------------------------------------------*/
/* Private variables ---------------------------------------------------------*/
/* You can monitor the converted value by adding the variable "ADC3ConvertedValue" 
   to the debugger watch window */
__IO uint16_t ADC3ConvertedValue[ADC_BUFF_SIZE];

//const uint16_t tone_burst[DAC_BUFF_SIZE] __attribute__((at(0x080ffca8)))= {2048,2027,2008,1990,1976,1965,1960,1959,1964,1975,1992,2016,2045,2079,2119,2162,2208,2256,2304,2352,2399,2442,2480,2512,2538,2555,2563,2561,2548,2525,2490,2444,2388,2322,2246,2162,2071,1975,1875,1773,1671,1571,1476,1386,1305,1233,1174,1127,1096,1080,1082,1101,1137,1191,1262,1350,1453,1569,1698,1838,1985,2137,2293,2448,2601,2748,2887,3015,3129,3227,3307,3367,3405,3420,3412,3380,3324,3244,3143,3020,2878,2718,2544,2358,2163,1963,1761,1560,1364,1177,1001,841,699,578,481,409,364,348,360,402,473,571,696,846,1018,1210,1418,1640,1871,2108,2346,2581,2809,3027,3230,3415,3578,3716,3827,3908,3959,3977,3962,3915,3835,3724,3584,3417,3226,3013,2782,2538,2284,2025,1765,1508,1260,1024,804,604,429,280,161,74,20,0,15,65,148,264,410,585,784,1005,1244,1497,1759,2026,2294,2557,2812,3053,3277,3480,3659,3810,3931,4019,4074,4095,4081,4032,3950,3836,3692,3520,3324,3108,2874,2627,2371,2112,1852,1597,1351,1118,902,707,536,391,276,191,138,118,131,177,253,360,494,653,834,1035,1250,1477,1712,1950,2187,2419,2642,2853,3048,3223,3377,3506,3609,3684,3730,3747,3735,3695,3627,3534,3417,3278,3120,2947,2762,2567,2366,2164,1963,1767,1580,1404,1242,1097,971,865,782,723,687,675,686,721,777,854,949,1061,1187,1324,1470,1622,1778,1933,2086,2235,2375,2506,2625,2730,2820,2894,2951,2990,3011,3016,3003,2974,2930,2872,2802,2722,2634,2539,2440,2338,2236,2136,2039,1947,1862,1785,1717,1659,1612,1575,1550,1536,1532,1538,1554,1578,1610,1647,1689,1735,1783,1832,1880,1926,1970,2010,2045,2075,2099,2118,2130,2136,2136,2131,2121,2107,2090,2071,2051}; 
const uint16_t tone_burst[DAC_BUFF_SIZE] = {2048,2027,2008,1990,1976,1965,1960,1959,1964,1975,1992,2016,2045,2079,2119,2162,2208,2256,2304,2352,2399,2442,2480,2512,2538,2555,2563,2561,2548,2525,2490,2444,2388,2322,2246,2162,2071,1975,1875,1773,1671,1571,1476,1386,1305,1233,1174,1127,1096,1080,1082,1101,1137,1191,1262,1350,1453,1569,1698,1838,1985,2137,2293,2448,2601,2748,2887,3015,3129,3227,3307,3367,3405,3420,3412,3380,3324,3244,3143,3020,2878,2718,2544,2358,2163,1963,1761,1560,1364,1177,1001,841,699,578,481,409,364,348,360,402,473,571,696,846,1018,1210,1418,1640,1871,2108,2346,2581,2809,3027,3230,3415,3578,3716,3827,3908,3959,3977,3962,3915,3835,3724,3584,3417,3226,3013,2782,2538,2284,2025,1765,1508,1260,1024,804,604,429,280,161,74,20,0,15,65,148,264,410,585,784,1005,1244,1497,1759,2026,2294,2557,2812,3053,3277,3480,3659,3810,3931,4019,4074,4095,4081,4032,3950,3836,3692,3520,3324,3108,2874,2627,2371,2112,1852,1597,1351,1118,902,707,536,391,276,191,138,118,131,177,253,360,494,653,834,1035,1250,1477,1712,1950,2187,2419,2642,2853,3048,3223,3377,3506,3609,3684,3730,3747,3735,3695,3627,3534,3417,3278,3120,2947,2762,2567,2366,2164,1963,1767,1580,1404,1242,1097,971,865,782,723,687,675,686,721,777,854,949,1061,1187,1324,1470,1622,1778,1933,2086,2235,2375,2506,2625,2730,2820,2894,2951,2990,3011,3016,3003,2974,2930,2872,2802,2722,2634,2539,2440,2338,2236,2136,2039,1947,1862,1785,1717,1659,1612,1575,1550,1536,1532,1538,1554,1578,1610,1647,1689,1735,1783,1832,1880,1926,1970,2010,2045,2075,2099,2118,2130,2136,2136,2131,2121,2107,2090,2071,2051}; 
//static uint16_t tone_burst[DAC_BUFF_SIZE] __attribute__((at(0x20000008)))= {2048,2027,2008,1990,1976,1965,1960,1959,1964,1975,1992,2016,2045,2079,2119,2162,2208,2256,2304,2352,2399,2442,2480,2512,2538,2555,2563,2561,2548,2525,2490,2444,2388,2322,2246,2162,2071,1975,1875,1773,1671,1571,1476,1386,1305,1233,1174,1127,1096,1080,1082,1101,1137,1191,1262,1350,1453,1569,1698,1838,1985,2137,2293,2448,2601,2748,2887,3015,3129,3227,3307,3367,3405,3420,3412,3380,3324,3244,3143,3020,2878,2718,2544,2358,2163,1963,1761,1560,1364,1177,1001,841,699,578,481,409,364,348,360,402,473,571,696,846,1018,1210,1418,1640,1871,2108,2346,2581,2809,3027,3230,3415,3578,3716,3827,3908,3959,3977,3962,3915,3835,3724,3584,3417,3226,3013,2782,2538,2284,2025,1765,1508,1260,1024,804,604,429,280,161,74,20,0,15,65,148,264,410,585,784,1005,1244,1497,1759,2026,2294,2557,2812,3053,3277,3480,3659,3810,3931,4019,4074,4095,4081,4032,3950,3836,3692,3520,3324,3108,2874,2627,2371,2112,1852,1597,1351,1118,902,707,536,391,276,191,138,118,131,177,253,360,494,653,834,1035,1250,1477,1712,1950,2187,2419,2642,2853,3048,3223,3377,3506,3609,3684,3730,3747,3735,3695,3627,3534,3417,3278,3120,2947,2762,2567,2366,2164,1963,1767,1580,1404,1242,1097,971,865,782,723,687,675,686,721,777,854,949,1061,1187,1324,1470,1622,1778,1933,2086,2235,2375,2506,2625,2730,2820,2894,2951,2990,3011,3016,3003,2974,2930,2872,2802,2722,2634,2539,2440,2338,2236,2136,2039,1947,1862,1785,1717,1659,1612,1575,1550,1536,1532,1538,1554,1578,1610,1647,1689,1735,1783,1832,1880,1926,1970,2010,2045,2075,2099,2118,2130,2136,2136,2131,2121,2107,2090,2071,2051}; 

double ultrasonic_wave_raw[ADC_BUFF_SIZE];
double ultrasonic_wave_lpf[ADC_BUFF_SIZE];
double ultrasonic_wave_hpf[ADC_BUFF_SIZE];
double ultrasonic_wave_intact[ADC_BUFF_SIZE];
	
	#if 0
double ultrasonic_wave_mean_baseline[ADC_BUFF_SIZE];
double ultrasonic_wave_mean_test[ADC_BUFF_SIZE];	
	#endif


double di;

	